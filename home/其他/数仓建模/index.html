
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.0, mkdocs-material-8.5.6" name="generator"/>
<title>数仓建模 - 大数据成神之路</title>
<link href="../../../assets/stylesheets/main.20d9efc8.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gdesc-inner { font-size: 0.75rem; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="orange" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="大数据成神之路" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="大数据成神之路">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            大数据成神之路
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              数仓建模
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="orange" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue-grey" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/maomao199691/Python_Code.git" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    maomao199691/Python_Code
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="大数据成神之路" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="大数据成神之路">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    大数据成神之路
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/maomao199691/Python_Code.git" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    maomao199691/Python_Code
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Home" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          Home
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        大数据技术之高频面试题
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" id="__nav_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_1_2">
          项目涉及技术
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="项目涉及技术" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_2">
<span class="md-nav__icon md-icon"></span>
          项目涉及技术
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Linux%26Shell/">
        Linux&amp;Shell
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/JavaSE/">
        JavaSE
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Hadoop/">
        Hadoop
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Zookeeper/">
        Zookeeper
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Flume/">
        Flume
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Kafka/">
        Kafka
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Hive/">
        Hive
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Datax/">
        Datax
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Maxwell/">
        Maxwell
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/DolphinScheduler/">
        DolphinScheduler
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Scala/">
        Scala
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/SparkCore%26SQL/">
        Spark Core&amp;SQL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/SparkStreaming/">
        Spark Streaming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Flink/">
        Flink
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/HBase/">
        HBase
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/ClickHouse/">
        ClickHouse
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Sqoop/">
        Sqoop
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../%E9%A1%B9%E7%9B%AE%E6%B6%89%E5%8F%8A%E6%8A%80%E6%9C%AF/Azkaban/">
        Azkaban
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/">
        数仓架构
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          数仓建模
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        数仓建模
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    数据仓库建模的意义
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    数据仓库建模方法论
  </a>
<nav aria-label="数据仓库建模方法论" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#er">
    ER模型
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    维度模型
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    维度建模理论之事实表
  </a>
<nav aria-label="维度建模理论之事实表" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    概述
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
    事务型事实表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
    周期型快照事实表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
    累积型快照事实表
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
    维度建模理论之维度表
  </a>
<nav aria-label="维度建模理论之维度表" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
    概述
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
    维度表设计步骤
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
    维度设计要点
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_14">
    数据仓库分层规划
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_15">
    数据仓库构建流程
  </a>
<nav aria-label="数据仓库构建流程" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_16">
    数据调研
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
    明确数据域
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_18">
    构建业务总线矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ods">
    ODS层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dim">
    DIM层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dwd">
    DWD层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_19">
    明确统计指标
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dws">
    DWS层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ads">
    ADS层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_20">
    建模工具是什么？
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ods_1">
    ODS层做了哪些事？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dim-dwd">
    DIM / DWD层做了哪些事？
  </a>
<nav aria-label="DIM / DWD层做了哪些事？" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_21">
    数据清洗
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_22">
    清洗的手段
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_23">
    清洗掉多少数据算合理
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_24">
    脱敏
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_25">
    维度整合
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#snappy">
    压缩snappy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orc">
    orc列式存储
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dws_1">
    DWS层做了哪些事？
  </a>
<nav aria-label="DWS层做了哪些事？" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dws_2">
    DWS层有几张宽表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_26">
    哪个宽表最宽？大概有多少个字段？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_27">
    具体用户行为宽表字段名称
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_28">
    哪张表数据量最多
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ads_1">
    ADS层分析过哪些指标
  </a>
<nav aria-label="ADS层分析过哪些指标" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_29">
    分析过的指标
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#g">
    留转G复活指标
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_30">
    分析过最难的指标
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E7%94%9F%E4%BA%A7%E7%BB%8F%E9%AA%8C%E2%80%94%E4%B8%9A%E5%8A%A1/">
        生产经验—业务
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E7%94%9F%E4%BA%A7%E7%BB%8F%E9%AA%8C%E2%80%94%E6%B5%8B%E8%AF%95%E4%B8%8A%E7%BA%BF%E7%9B%B8%E5%85%B3/">
        生产经验—测试上线相关
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E7%94%9F%E4%BA%A7%E7%BB%8F%E9%AA%8C%E2%80%94%E6%8A%80%E6%9C%AF/">
        生产经验—技术
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E7%94%9F%E4%BA%A7%E7%BB%8F%E9%AA%8C%E2%80%94%E7%83%AD%E7%82%B9%E9%97%AE%E9%A2%98/">
        生产经验—热点问题
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E5%AE%9E%E6%97%B6%E6%95%B0%E4%BB%93%E9%A1%B9%E7%9B%AE/">
        实时数仓项目
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../JavaSE/">
        JavaSE
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Redis/">
        Redis
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../MySql/">
        MySql
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../JVM/">
        JVM
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../JUC/">
        JUC
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E9%9D%A2%E8%AF%95%E8%AF%B4%E6%98%8E/">
        面试说明
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../LeetCode%E9%A2%98%E7%9B%AE%E7%B2%BE%E9%80%89/">
        LeetCode题目精选
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%E6%89%8B%E5%86%99HQL%E9%A2%98%E7%9B%AE%E7%BB%83%E4%B9%A0/">
        手写HQL题目练习
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    数据仓库建模的意义
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    数据仓库建模方法论
  </a>
<nav aria-label="数据仓库建模方法论" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#er">
    ER模型
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
    维度模型
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
    维度建模理论之事实表
  </a>
<nav aria-label="维度建模理论之事实表" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
    概述
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
    事务型事实表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_8">
    周期型快照事实表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
    累积型快照事实表
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_10">
    维度建模理论之维度表
  </a>
<nav aria-label="维度建模理论之维度表" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_11">
    概述
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
    维度表设计步骤
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
    维度设计要点
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_14">
    数据仓库分层规划
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_15">
    数据仓库构建流程
  </a>
<nav aria-label="数据仓库构建流程" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_16">
    数据调研
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
    明确数据域
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_18">
    构建业务总线矩阵
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ods">
    ODS层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dim">
    DIM层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dwd">
    DWD层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_19">
    明确统计指标
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dws">
    DWS层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ads">
    ADS层
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_20">
    建模工具是什么？
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ods_1">
    ODS层做了哪些事？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dim-dwd">
    DIM / DWD层做了哪些事？
  </a>
<nav aria-label="DIM / DWD层做了哪些事？" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_21">
    数据清洗
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_22">
    清洗的手段
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_23">
    清洗掉多少数据算合理
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_24">
    脱敏
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_25">
    维度整合
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#snappy">
    压缩snappy
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orc">
    orc列式存储
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dws_1">
    DWS层做了哪些事？
  </a>
<nav aria-label="DWS层做了哪些事？" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dws_2">
    DWS层有几张宽表
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_26">
    哪个宽表最宽？大概有多少个字段？
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_27">
    具体用户行为宽表字段名称
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_28">
    哪张表数据量最多
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ads_1">
    ADS层分析过哪些指标
  </a>
<nav aria-label="ADS层分析过哪些指标" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_29">
    分析过的指标
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#g">
    留转G复活指标
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_30">
    分析过最难的指标
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/maomao199691/Python_Code.git/edit/master/docs/home/其他/数仓建模.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="_1">数仓建模</h1>
<h2 id="_2">数据仓库建模的意义</h2>
<p>​   如果把数据看作图书馆里的书，我们希望看到它们在书架上分门别类地放置；</p>
<ul>
<li>
<p><strong>减少重复计算</strong></p>
</li>
<li>
<p><strong>快速查询所需要的数据</strong></p>
</li>
</ul>
<h2 id="_3">数据仓库建模方法论</h2>
<h3 id="er">ER模型</h3>
<p>​   遵循三范式；适用于JavaEE程序员，大数据开发不用。</p>
<h3 id="_4">维度模型</h3>
<p>​   雪花模型、星型模型和星座模型</p>
<p>​   （在维度建模的基础上又分为三种模型：星型模型、雪花模型、星座模型）</p>
<p>​   <strong>星型模型（一级维度表）</strong>，雪花（多级维度），星座模型（星型模型+多个事实表）</p>
<h2 id="_5">维度建模理论之事实表</h2>
<h3 id="_6">概述</h3>
<p>​   特点：有度量值</p>
<p>​        分类：事务型事实表、周期快照事实表和累积快照事实表</p>
<p>​        通常采用增量同步。</p>
<h3 id="_7">事务型事实表</h3>
<p>  事务事实表用来记录各业务过程，它保存的是各业务过程的<strong>原子操作</strong>事件，即最细粒度的操作事件。粒度是指事实表中一行数据所表达的业务细节程度。</p>
<p><strong>1）设计过程</strong></p>
<p>  设计事务事实表时一般可遵循以下四个步骤：</p>
<p>  <strong><font color="red">选择业务过程→声明粒度→确认维度→确认事实</font></strong></p>
<p>​   <strong>（1）选择业务过程</strong></p>
<p>  在业务系统中，挑选我们<font color="red">感兴趣</font>的业务过程，业务过程可以概括为一个个不可拆分的行为事件，例如电商交易中的下单，取消订单，付款，退单等，都是业务过程。通常情况下，一个业务过程对应一张事务型事实表。</p>
<p>​   <strong>（2）声明粒度</strong></p>
<p>  业务过程确定后，需要为每个业务过程声明粒度。即精确定义每张事务型事实表的每行数据表示什么，应该尽可能选择最细粒度，以此来应各种细节程度的需求。</p>
<p>  <strong>典型的粒度声明如下：</strong></p>
<p>  订单事实表中一行数据表示的是一个订单中的一个商品项。</p>
<p>​   <strong>（3）确定维度</strong></p>
<p>  确定维度具体是指，确定与每张事务型事实表相关的维度有哪些。</p>
<p>  确定维度时应尽量多的选择与业务过程相关的环境信息。因为维度的丰富程度就决定了维度模型能够支持的指标丰富程度。</p>
<p>​   <strong>（4）确定事实</strong></p>
<p>  此处的“事实”一词，指的是每个业务过程的<font color="red">度量值（通常是可累加的数字类型的值，例如：次数、个数、件数、金额等）</font>。</p>
<p>  经过上述四个步骤，事务型事实表就基本设计完成了。第一步选择业务过程可以确定有哪些事务型事实表，第二步可以确定每张事务型事实表的每行数据是什么，第三步可以确定每张事务型事实表的维度外键，第四步可以确定每张事务型事实表的度量值字段。</p>
<p><strong>2）不足</strong></p>
<p>​   <strong>（1）存量型指标</strong></p>
<p>  例如商品库存，账户余额等。</p>
<p>​   <strong>（2）多事务关联统计</strong></p>
<p>  例如，现需要统计最近30天，用户下单到支付的时间间隔的平均值。统计思路应该是找到下单事务事实表和支付事务事实表，过滤出最近30天的记录，然后按照订单id对两张事实表进行关联，之后用支付时间减去下单时间，然后再求平均值。</p>
<h3 id="_8">周期型快照事实表</h3>
<p>  周期快照事实表以具有规律性的、可预见的时间间隔来记录事实，主要用于分析一些<strong>存量型</strong>（例如商品库存，账户余额）或者<strong>连续状态型</strong>（空气温度，行驶速度）指标。</p>
<p><strong>1）设计流程</strong></p>
<p>​   <strong>（1）确定粒度</strong></p>
<p>  周期型快照事实表的粒度可由采样周期和维度描述，故确定采样周期和维度后即可确定粒度。</p>
<p>  <strong>采样周期通常选择每日。</strong></p>
<p>  维度可根据统计指标决定，例如指标为统计每个仓库中每种商品的库存，则可确定维度为仓库和商品。</p>
<p>  确定完采样周期和维度后，即可确定该表粒度为每日-仓库-商品。</p>
<p>​   <strong>（2）确认事实</strong></p>
<p>  事实也可根据统计指标决定，例如指标为统计每个仓库中每种商品的库存，则事实为商品库存。</p>
<p><strong>2）事实类型</strong></p>
<p>  此处的事实类型是指度量值的类型，而非事实表的类型。事实（度量值）共分为三类，分别是可加事实，半可加事实和不可加事实。</p>
<p>​   <strong>（1）可加事实</strong></p>
<p>  可加事实是指可以按照与事实表相关的所有维度进行累加，例如事务型事实表中的事实。</p>
<p>  <strong>例如：订单金额（用户、商品、地区、时间）</strong></p>
<p>​   <strong>（2）半可加事实</strong></p>
<p>  半可加事实是指只能按照与事实表相关的一部分维度进行累加，<strong>例如周期型快照事实表中的事实。以上述各仓库中各商品的库存每天快照事实表为例，这张表中的库存事实可以按照仓库或者商品维度进行累加，但是不能按照时间维度进行累加，因为将每天的库存累加起来是没有任何意义的。</strong></p>
<p>​   <strong>（3）不可加事实</strong></p>
<p>  不可加事实是指完全不具备可加性，例如比率型事实。不可加事实通常需要转化为可加事实，<strong>例如比率可转化为分子和分母。</strong></p>
<h3 id="_9">累积型快照事实表</h3>
<p>  累计快照事实表是基于一个业务流程中的多个关键业务过程联合处理而构建的事实表，如交易流程中的下单、支付、发货、确认收货业务过程。</p>
<p>  累积型快照事实表通常具有多个日期字段，每个日期对应业务流程中的一个关键业务过程（里程碑）。</p>
<table>
<thead>
<tr>
<th>订单id</th>
<th>用户id</th>
<th>下单日期</th>
<th>支付日期</th>
<th>发货日期</th>
<th>确认收货日期</th>
<th>订单金额</th>
<th>支付金额</th>
</tr>
</thead>
<tbody>
<tr>
<td>1001</td>
<td>1234</td>
<td>2020-06-14</td>
<td>2020-06-15</td>
<td>2020-06-16</td>
<td>2020-06-17</td>
<td>1000</td>
<td>1000</td>
</tr>
</tbody>
</table>
<p><strong>1）设计流程</strong></p>
<p>  累积型快照事实表的设计流程同事务型事实表类似，也可采用以下四个步骤，下面重点描述与事务型事实表的不同之处。</p>
<p>  <strong>选择业务过程→声明粒度→确认维度→确认事实。</strong></p>
<p>​   <strong>（1）选择业务过程</strong></p>
<p>  选择一个业务流程中需要关联分析的<strong>多个关键业务过程</strong>，多个业务过程对应一张累积型快照事实表。</p>
<p>​   <strong>（2）声明粒度</strong></p>
<p>  精确定义每行数据表示的是什么，尽量选择最小粒度。</p>
<p>​   <strong>（3）确认维度</strong></p>
<p>  选择与各业务过程相关的维度，需要注意的是，每个业务过程均需要一个日期维度。</p>
<p>​   <strong>（4）确认事实</strong></p>
<p>  选择<strong>各个业务过程</strong>的度量值。</p>
<h2 id="_10">维度建模理论之维度表</h2>
<h3 id="_11">概述</h3>
<p>  维度表是维度建模的基础和灵魂。前文提到，事实表紧紧围绕业务过程进行设计，而维度表则围绕业务过程所处的环境进行设计。维度表主要包含一个主键和各种维度字段，维度字段称为维度属性。</p>
<h3 id="_12">维度表设计步骤</h3>
<p>​   <strong>（1）确定维度（表）</strong></p>
<p>  在设计事实表时，已经确定了与每个事实表相关的维度，理论上每个相关维度均需对应一张维度表。</p>
<p>​   <strong>（2）确定主维表和相关维表</strong></p>
<p>  此处的主维表和相关维表均指<strong><font color="red">业务系统</font></strong>中与某维度相关的表。例如业务系统中与商品相关的表有sku_info，spu_info，base_trademark，base_category3，base_category2，base_category1等，其中sku_info就称为商品维度的主维表，其余表称为商品维度的相关维表。维度表的粒度通常与主维表相同。</p>
<p>​   <strong>（3）确定维度属性</strong></p>
<ul>
<li>
<p>尽可能生成<strong>丰富</strong>的维度属性。</p>
</li>
<li>
<p>尽量<strong>不使用编码</strong>，而使用明确的文字说明，一般可以编码和文字共存。</p>
</li>
<li>
<p>尽量沉淀出<strong>通用</strong>的维度属性。</p>
</li>
</ul>
<h3 id="_13">维度设计要点</h3>
<p><strong>1）维度变化</strong></p>
<p>  维度属性通常不是静态的，而是会随时间变化的，数据仓库的一个重要特点就是反映历史的变化，所以如何保存维度的历史状态是维度设计的重要工作之一。保存维度数据的历史状态，通常有以下两种做法，分别是全量快照表和拉链表。</p>
<p>​   <strong>（1）全量快照表</strong></p>
<p>  离线数据仓库的计算周期通常为每天一次，所以可以每天保存一份全量的维度数据。这种方式的优点和缺点都很明显。</p>
<p>  优点是简单而有效，开发和维护成本低，且方便理解和使用。</p>
<p>  缺点是浪费存储空间，尤其是当数据的变化比例比较低时。</p>
<p>​   <strong>（2）拉链表</strong></p>
<p>  拉链表的意义就在于能够更加高效的保存维度信息的历史状态。</p>
<p><strong>2）多值维度</strong></p>
<p>  例如：一个订单关联多个商品</p>
<p>  第一种：降低事实表的粒度，例如将订单事实表的粒度由一个订单降低为一个订单中的一个商品项。</p>
<p>  第二种：在事实表中采用多字段保存多个维度值，每个字段保存一个维度id。这种方案只适用于多值维度个数固定的情况。</p>
<p><strong>3）多值属性</strong></p>
<p>  例如商品维度的平台属性和销售属性，每个商品均有多个属性值。</p>
<p>  第一种：将多值属性放到一个字段，该字段内容为key1:value1，key2:value2的形式，例如一个手机商品的平台属性值为“品牌:华为，系统:鸿蒙，CPU:麒麟990”。</p>
<p>  第二种：将多值属性放到多个字段，每个字段对应一个属性。这种方案只适用于多值属性个数固定的情况。</p>
<h2 id="_14">数据仓库分层规划</h2>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/09/12/NpBQZDU2sGJmu6x.png"><img alt="trigger" src="https://s2.loli.net/2022/09/12/NpBQZDU2sGJmu6x.png" width="500"/></a></p>
<h2 id="_15">数据仓库构建流程</h2>
<p>​   以下是构建数据仓库的完整流程。</p>
<p><center><strong>数据仓库构建流程</strong></center></p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/mlOqTM8ZgsnF54P.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/mlOqTM8ZgsnF54P.png" width="width"/></a></p>
<h3 id="_16">数据调研</h3>
<p>  数据调研重点要做两项工作，分别是业务调研和需求分析。这两项工作做的是否充分，直接影响着数据仓库的质量。</p>
<p><strong>1）业务调研</strong></p>
<p>  业务调研的主要目标是<strong>熟悉业务流程</strong>、<strong>熟悉业务数据</strong>。</p>
<p>  <strong>熟悉业务流程</strong>要求做到，明确每个业务的具体流程，需要将该业务所包含的每个<strong>业务过程</strong>一一列举出来。</p>
<p>  <strong>熟悉业务数据</strong>要求做到，将数据（包括埋点日志和业务数据表）与业务过程对应起来，明确每个业务过程会对哪些表的数据产生影响，以及产生什么影响。产生的影响，需要具体到，是新增一条数据，还是修改一条数据，并且需要明确新增的内容或者是修改的逻辑。</p>
<p>  下面业务电商中的交易为例进行演示，交易业务涉及到的业务过程有买家下单、买家支付、卖家发货，买家收货，具体流程如下图。</p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/jQKcTMnNDwAWFOk.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/jQKcTMnNDwAWFOk.png" width="500"/></a></p>
<p><strong>2）需求分析</strong></p>
<p>  典型的需求指标如，最近一天各省份手机品类订单总额。</p>
<p>  分析需求时，需要明确需求所需的<strong>业务过程</strong>及<strong>维度</strong>，例如该需求所需的业务过程就是买家下单，所需的维度有日期，省份，商品品类。</p>
<p><strong>3）总结</strong></p>
<p>  做完业务分析和需求分析之后，要保证每个需求都能找到与之对应的业务过程及维度。若现有数据无法满足需求，则需要和业务方进行沟通，例如某个页面需要新增某个行为的埋点。</p>
<h3 id="_17">明确数据域</h3>
<p>  数据仓库模型设计除横向的分层外，通常也需要根据业务情况进行纵向划分数据域。</p>
<p>  划分数据域的意义是<strong>便于数据的管理和应用</strong>。</p>
<p>  通常可以根据业务过程或者部门进行划分，本项目根据业务过程进行划分，需要注意的是一个业务过程只能属于一个数据域。</p>
<p>​   下面是本数仓项目所需的所有业务过程及数据域划分详情。</p>
<table>
<thead>
<tr>
<th><strong>数据域</strong></th>
<th><strong>业务过程</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>交易域</strong></td>
<td>加购、下单、取消订单、支付成功、退单、退款成功</td>
</tr>
<tr>
<td><strong>流量域</strong></td>
<td>页面浏览、启动应用、动作、曝光、错误</td>
</tr>
<tr>
<td><strong>用户域</strong></td>
<td>注册、登录</td>
</tr>
<tr>
<td><strong>互动域</strong></td>
<td>收藏、评价</td>
</tr>
<tr>
<td><strong>工具域</strong></td>
<td>优惠券领取、优惠券使用（下单）、优惠券使用（支付）</td>
</tr>
</tbody>
</table>
<h3 id="_18">构建业务总线矩阵</h3>
<p>  业务总线矩阵中包含维度模型所需的所有事实（业务过程）以及维度，以及各业务过程与各维度的关系。矩阵的行是一个个业务过程，矩阵的列是一个个的维度，行列的交点表示业务过程与维度的关系。</p>
<p><center><strong>构建业务总线矩阵</strong></center></p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/L5oFS1DAXv3G7UY.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/L5oFS1DAXv3G7UY.png" width="800"/></a></p>
<p>  一个业务过程对应维度模型中一张事务型事实表，一个维度则对应维度模型中的一张维度表。所以构建业务总线矩阵的过程就是设计维度模型的过程。但是需要注意的是，总线矩阵中通常只包含事务型事实表，另外两种类型的事实表需单独设计。</p>
<p>  按照事务型事实表的设计流程，<strong><font color="red">选择业务过程-&gt;声明粒度-&gt;确认维度-&gt;确认事实</font></strong>，得到的最终的业务总线矩阵见以下表格。</p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/fI1HlS7s2KLJao3.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/fI1HlS7s2KLJao3.png" width="900"/></a></p>
<h3 id="ods">ODS层</h3>
<p>​   （1）保持数据原貌不做任何修改，起到备份数据的作用。</p>
<p>​   （2）数据采用压缩，减少磁盘存储空间（例如：原始数据100G，可以压缩到10G左右）</p>
<p>​   （3）创建分区表，防止后续的全表扫描</p>
<h3 id="dim">DIM层</h3>
<p>​   商品维度表（维度整合）、地区维度表（维度整合）、日期维度表、优惠券维度表、活动维度表（整合）。</p>
<p>​   用户维度表（处理缓慢变化维，用拉链表）。</p>
<p>​   拉链表处理的业务场景：<font color="red">主要处理缓慢变化维的业务场景。（用户表、订单表）</font>。</p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/zgxGhXebRtnA9om.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/zgxGhXebRtnA9om.png" width="800"/></a></p>
<h3 id="dwd">DWD层</h3>
<p><strong>1）事务型事实表</strong></p>
<ul>
<li>
<p><strong>交易域</strong>：<font color="red">加购</font>事务事实表、交易域<font color="red">下单</font>事务事实表、交易域<font color="red">取消订单</font>事务事实表、交易域<font color="red">支付成功</font>事务事实表、交易域<font color="red">支付成功</font>事务事实表、交易域<font color="red">退款成功</font>事务事实表、</p>
</li>
<li>
<p><strong>工具域</strong>：<font color="red">优惠券领取</font>事务事实表、工具域<font color="red">优惠券使用(下单)</font>事务事实表、工具域<font color="red">优惠券使用(支付)</font>事务事实表</p>
</li>
<li>
<p><strong>互动域</strong>：<font color="red">收藏</font>商品事务事实表、互动域<font color="red">评价</font>事务事实表</p>
</li>
<li>
<p><strong>流量域</strong>：<font color="red">页面浏览</font>事务事实表、流量域<font color="red">启动</font>事务事实表、流量域<font color="red">动作</font>事务事实表、流量域<font color="red">曝光</font>事务事实表、流量域错误事务事实表</p>
</li>
<li>
<p><strong>用户域</strong>：用户注册事务事实表、用户域用户<font color="red">登录</font>事务事实表</p>
</li>
</ul>
<p>事务型事实表建模步骤：</p>
<p><strong><font color="red">选择业务过程→声明粒度→确认维度→确认事实</font></strong></p>
<p>​   <strong>（1）选择业务过程</strong></p>
<p>  在业务系统中，如果业务表过多，挑选我们感兴趣的业务线，比如下单业务，支付业务，退款业务，物流业务，一条业务线对应一张事实表。如果小公司业务表比较少，建议选择所有业务线。</p>
<p>​   <strong>（2）声明粒度</strong></p>
<p>  数据粒度指数据仓库的数据中保存数据的细化程度或综合程度的级别。</p>
<p>  声明粒度意味着精确定义事实表中的一行数据表示什么，应该尽可能选择最小粒度，以此来应各种各样的需求。</p>
<p>​   <strong>典型的粒度声明如下：</strong></p>
<p>  订单当中的每个商品项作为下单事实表中的一行，粒度为每次</p>
<p>  每周的订单次数作为一行，粒度为每周。</p>
<p>  每月的订单次数作为一行，粒度为每月。</p>
<p>  如果在DWD层粒度就是每周或者每月，那么后续就没有办法统计细粒度的指标了。所有建议采用最小粒度。</p>
<p>​   <strong>（3）确定维度</strong></p>
<p>  维度的主要作用是描述业务是事实，主要表示的是“谁，何处，何时”等信息。例如：时间维度、用户维度、地区维度等常见维度。</p>
<p>​   <strong>（4）确定事实</strong></p>
<p>  此处的“事实”一词，指的是业务中的度量值，例如订单金额、下单次数等。</p>
<p>  在DWD层，以<strong>业务过程</strong>为建模驱动，基于每个具体业务过程的特点，构建<strong>最细粒度</strong>的明细层事实表。事实表可做适当的宽表化处理。</p>
<p><strong>2）周期型快照事实表</strong></p>
<p>  交易域购物车周期快照事实表</p>
<p>​   <strong>（1</strong><strong>）确定粒度</strong></p>
<p>  采样周期通常选择每日。</p>
<p>​   <strong>（2）确认事实</strong></p>
<p>  事实也可根据统计指标决定，例如指标为统计每个仓库中每种商品的库存，则事实为商品库存。</p>
<h3 id="_19">明确统计指标</h3>
<p>  明确统计指标具体的工作是，深入分析需求，构建指标体系。构建指标体系的主要意义就是指标定义标准化。所有指标的定义，都必须遵循同一套标准，这样能有效的避免指标定义存在歧义，指标定义重复等问题。</p>
<p><strong>1）指标体系相关概念</strong></p>
<p>​   <strong>（1）原子指标</strong></p>
<p>  原子指标基于某一<strong>业务过程</strong>的<strong>度量值</strong>，是业务定义中不可再拆解的指标，原子指标的核心功能就是对指标的<strong>聚合逻辑</strong>进行了定义。我们可以得出结论，原子指标包含三要素，分别是<strong>业务过程、度量值和聚合逻辑。</strong></p>
<p>  例如<strong>订单总额</strong>就是一个典型的原子指标，其中的业务过程为用户下单、度量值为订单金额，聚合逻辑为sum()求和。需要注意的是原子指标只是用来辅助定义指标一个概念，通常不会对应有实际统计需求与之对应。</p>
<p>​   <strong>（2）派生指标</strong></p>
<p>  派生指标基于原子指标，其与原子指标的关系如下图所示。</p>
<p><center><strong>派生指标</strong></center></p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/ISFEUi3BjJQXcyP.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/ISFEUi3BjJQXcyP.png" width="800"/></a></p>
<p>  与原子指标不同，派生指标通常会对应实际的统计需求。请从图中的例子中，体会指标定义标准化的含义。</p>
<p>​   <strong>（3）衍生指标</strong></p>
<p>  衍生指标是在一个或多个派生指标的基础上，通过各种逻辑运算复合而成的。例如比率、比例等类型的指标。衍生指标也会对应实际的统计需求。</p>
<p><center><strong>衍生指标</strong></center></p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/fxtRE1GNpgbewKj.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/fxtRE1GNpgbewKj.png" width="800"/></a></p>
<p><strong>2）指标体系对于数仓建模的意义</strong></p>
<p>  通过上述两个具体的案例可以看出，绝大多数的统计需求，都可以使用原子指标、派生指标以及衍生指标这套标准去定义。同时能够发现这些统计需求都直接的或间接的对应一个或者是多个派生指标。</p>
<p>  当统计需求足够多时，必然会出现部分统计需求对应的派生指标相同的情况。这种情况下，我们就可以考虑将这些公共的派生指标保存下来，这样做的主要目的就是减少重复计算，提高数据的复用性。</p>
<p>  这些公共的派生指标统一保存在数据仓库的DWS层。因此DWS层设计，就可以参考我们根据现有的统计需求整理出的派生指标。</p>
<p>  按照上述标准整理出的指标体系如下：</p>
<p><center><strong>指标体系(部分)</strong></center></p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/jxtAopD4avyVwZz.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/jxtAopD4avyVwZz.png" width="800"/></a></p>
<p><center><strong>派生指标体系(部分)</strong></center></p>
<p><a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/UiBbHVdXFghkCea.png"><img alt="trigger" src="https://s2.loli.net/2022/10/11/UiBbHVdXFghkCea.png" width="800"/></a></p>
<h3 id="dws">DWS层</h3>
<p>  汇总模型的设计参考上述整理出的指标体系（主要是派生指标）即可。汇总表与派生指标的对应关系是，一张汇总表通常包含<strong>业务过程相同</strong>、<strong>统计周期相同</strong>、<strong>统计粒度相同</strong>的多个派生指标。</p>
<p><strong>1）最近 1 日汇总表</strong></p>
<p>​
  交易域用户商品粒度订单最近1日汇总表</p>
<p>  交易域用户商品粒度退单最近1日汇总表</p>
<p>  交易域用户粒度订单最近1日汇总表</p>
<p>  交易域用户粒度加购最近1日汇总表</p>
<p>  交易域用户粒度支付最近1日汇总表</p>
<p>  交易域用户粒度退单最近1日汇总表</p>
<p>  交易域省份粒度订单最近1日汇总表</p>
<p>  流量域会话粒度页面浏览最近1日汇总表</p>
<p>  流量域访客页面粒度页面浏览最近1日汇总表</p>
<p><strong>2）最近 n 日汇总表</strong></p>
<p>  交易域用户商品粒度订单最近n日汇总表</p>
<p>  交易域用户商品粒度退单最近n日汇总表</p>
<p>  交易域用户粒度订单最近n日汇总表</p>
<p>  交易域用户粒度加购最近n日汇总表</p>
<p>  交易域用户粒度支付最近n日汇总表</p>
<p>  交易域省份粒度订单最近n日汇总表</p>
<p>  交易域优惠券粒度订单最近n日汇总表</p>
<p>  交易域活动粒度订单最近n日汇总表</p>
<p>  交易域用户粒度退单最近n日汇总表</p>
<p>  流量域访客页面粒度页面浏览最近n日汇总表</p>
<p><strong>3）历史至今汇总表</strong></p>
<p>  交易域用户粒度订单历史至今汇总表</p>
<p>  交易域用户粒度支付历史至今汇总表</p>
<p>  用户域用户粒度登录历史至今汇总表</p>
<h3 id="ads">ADS层</h3>
<p>  要求一口气说出30个指标，并能手写。</p>
<p><strong>1）流量主题</strong></p>
<p>​   （1）各渠道流量统计，需求说明如下：</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>统计粒度</strong></th>
<th>指标</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1/7/30日</td>
<td>渠道</td>
<td>访客数</td>
<td>统计访问人数</td>
</tr>
<tr>
<td>最近1/7/30日</td>
<td>渠道</td>
<td>会话平均停留时长</td>
<td>统计每个会话平均停留时长</td>
</tr>
<tr>
<td>最近1/7/30日</td>
<td>渠道</td>
<td>会话平均浏览页面数</td>
<td>统计每个会话平均浏览页面数</td>
</tr>
<tr>
<td>最近1/7/30日</td>
<td>渠道</td>
<td>会话总数</td>
<td>统计会话总数</td>
</tr>
<tr>
<td>最近1/7/30日</td>
<td>渠道</td>
<td>跳出率</td>
<td>只有一个页面的会话的比例</td>
</tr>
</tbody>
</table>
<p>​   （2）路径分析</p>
<p><strong>2）用户主题</strong></p>
<p>​   （1）用户变动统计</p>
<p>该需求包括两个指标，分别为流失用户数和回流用户数，以下为对两个指标的解释说明。</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>最近1日</strong></td>
<td>流失用户数</td>
<td>之前活跃过的用户，最近一段时间未活跃，就称为流失用户。此处要求统计7日前（只包含7日前当天）活跃，但最近7日未活跃的用户总数。</td>
</tr>
<tr>
<td><strong>最近1日</strong></td>
<td>回流用户数</td>
<td>之前的活跃用户，一段时间未活跃（流失），今日又活跃了，就称为回流用户。此处要求统计回流用户总数。</td>
</tr>
</tbody>
</table>
<p>​   （2）用户留存率</p>
<p>​   （3）用户新增活跃统计</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>指标</strong></th>
<th><strong>指标说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>新增用户数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>活跃用户数</td>
<td>略</td>
</tr>
</tbody>
</table>
<p>​   （4）用户行为漏斗分析</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>首页浏览人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>商品详情页浏览人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>加购人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>下单人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>支付人数</td>
<td>支付成功人数</td>
</tr>
</tbody>
</table>
<p>​   （5）新增交易用户统计</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>新增下单人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>新增支付人数</td>
<td>略</td>
</tr>
</tbody>
</table>
<p><strong>3）商品主题</strong></p>
<p>​   （1）最近7/30日各品牌复购率</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>统计粒度</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近7、30日</td>
<td>品牌</td>
<td>复购率</td>
<td>重复购买人数占购买人数比例</td>
</tr>
</tbody>
</table>
<p>​   （2）各品牌商品交易统计</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>统计粒度</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>品牌</td>
<td>订单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>品牌</td>
<td>订单人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>品牌</td>
<td>退单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>品牌</td>
<td>退单人数</td>
<td>略</td>
</tr>
</tbody>
</table>
<p>​   （3）各品类商品交易统计</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>统计粒度</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>品类</td>
<td>订单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>品类</td>
<td>订单人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>品类</td>
<td>退单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>品类</td>
<td>退单人数</td>
<td>略</td>
</tr>
</tbody>
</table>
<p>​   （4）各分类商品购物车存量Top10</p>
<p><strong>4）交易主题</strong></p>
<p>​   （1）交易综合统计</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>订单总额</td>
<td>订单最终金额</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>订单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>订单人数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>退单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>退单人数</td>
<td>略</td>
</tr>
</tbody>
</table>
<p>​   （2）各省份交易统计</p>
<table>
<thead>
<tr>
<th><strong>统计周期</strong></th>
<th><strong>统计粒度</strong></th>
<th><strong>指标</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>最近1、7、30日</td>
<td>省份</td>
<td>订单数</td>
<td>略</td>
</tr>
<tr>
<td>最近1、7、30日</td>
<td>省份</td>
<td>订单金额</td>
<td>略</td>
</tr>
</tbody>
</table>
<h3 id="_20">建模工具是什么？</h3>
<p>​   PowerDesigner/EZDML</p>
<h2 id="ods_1">ODS层做了哪些事？</h2>
<p>​   （1）保持数据原貌，不做任何修改</p>
<p>​   （2）压缩采用gzip，压缩比是100g数据压缩完10g左右。</p>
<p>​   （3）创建分区表</p>
<h2 id="dim-dwd">DIM / DWD层做了哪些事？</h2>
<h3 id="_21">数据清洗</h3>
<p>​   （1）空值去除</p>
<p>​   （2）过滤核心字段无意义的数据，比如订单表中订单id为null，支付表中支付id为空</p>
<p>​   （3）将用户行为宽表和业务表进行数据一致性处理</p>
<p>  select case when a is null then b else a end as JZR,</p>
<p>  ...</p>
<p>  from A</p>
<h3 id="_22">清洗的手段</h3>
<p>   HQL、MR、SparkSQL、Kettle、Python（项目中采用sql进行清除）</p>
<h3 id="_23">清洗掉多少数据算合理</h3>
<p>  1万条数据清洗掉1条。</p>
<h3 id="_24">脱敏</h3>
<p>  对手机号、身份证号等敏感数据脱敏</p>
<h3 id="_25">维度整合</h3>
<p>  对业务数据传过来的表进行维度整合和降维。（商品一级二级三级、省市县、年月日）</p>
<p>  商品表、spu表、品类表、商品一级分类、二级分类、三级分类=》商品表</p>
<p>  省份表、地区表=》地区表</p>
<p>  活动信息表、活动规则表=》活动维度表</p>
<h3 id="snappy">压缩snappy</h3>
<h3 id="orc">orc列式存储</h3>
<h2 id="dws_1">DWS层做了哪些事？</h2>
<h3 id="dws_2">DWS层有几张宽表</h3>
<p><strong>1）最近1</strong><strong>日汇总表</strong></p>
<p>  交易域用户商品粒度订单最近1日汇总表</p>
<p>  交易域用户商品粒度退单最近1日汇总表</p>
<p>  交易域用户粒度订单最近1日汇总表</p>
<p>  交易域用户粒度加购最近1日汇总表</p>
<p>  交易域用户粒度支付最近1日汇总表</p>
<p>  交易域用户粒度退单最近1日汇总表</p>
<p>  交易域省份粒度订单最近1日汇总表</p>
<p>  流量域会话粒度页面浏览最近1日汇总表</p>
<p>  流量域访客页面粒度页面浏览最近1日汇总表</p>
<p><strong>2）最近n</strong><strong>日汇总表</strong></p>
<p>  交易域用户商品粒度订单最近n日汇总表</p>
<p>  交易域用户商品粒度退单最近n日汇总表</p>
<p>  交易域用户粒度订单最近n日汇总表</p>
<p>  交易域用户粒度加购最近n日汇总表</p>
<p>  交易域用户粒度支付最近n日汇总表</p>
<p>  交易域省份粒度订单最近n日汇总表</p>
<p>  交易域优惠券粒度订单最近n日汇总表</p>
<p>  交易域活动粒度订单最近n日汇总表</p>
<p>  交易域用户粒度退单最近n日汇总表</p>
<p>  流量域访客页面粒度页面浏览最近n日汇总表</p>
<p><strong>3）历史至今汇总表</strong></p>
<p>  交易域用户粒度订单历史至今汇总表</p>
<p>  交易域用户粒度支付历史至今汇总表</p>
<p>  用户域用户粒度登录历史至今汇总表</p>
<h3 id="_26">哪个宽表最宽？大概有多少个字段？</h3>
<p>  交易域用户商品粒度订单最近1日汇总表，大概有60-100个字段</p>
<h3 id="_27">具体用户行为宽表字段名称</h3>
<p>  评论、打赏、收藏、关注--商品、关注--人、点赞、分享、好价爆料、文章发布、活跃、签到、补签卡、幸运屋、礼品、金币、电商点击、gmv</p>
<pre><code class="language-SQL">CREATE TABLE `app_usr_interact`(

    `stat_dt` date COMMENT '互动日期', 

    `user_id` string COMMENT '用户id', 

    `nickname` string COMMENT '用户昵称', 

    `register_date` string COMMENT '注册日期', 

    `register_from` string COMMENT '注册来源', 

    `remark` string COMMENT '细分渠道', 

    `province` string COMMENT '注册省份', 

    `pl_cnt` bigint COMMENT '评论次数', 

    `ds_cnt` bigint COMMENT '打赏次数', 

    `sc_add` bigint COMMENT '添加收藏', 

    `sc_cancel` bigint COMMENT '取消收藏', 

    `gzg_add` bigint COMMENT '关注商品', 

    `gzg_cancel` bigint COMMENT '取消关注商品', 

    `gzp_add` bigint COMMENT '关注人', 

    `gzp_cancel` bigint COMMENT '取消关注人', 

    `buzhi_cnt` bigint COMMENT '点不值次数', 

    `zhi_cnt` bigint COMMENT '点值次数', 

    `zan_cnt` bigint COMMENT '点赞次数', 

    `share_cnts` bigint COMMENT '分享次数', 

    `bl_cnt` bigint COMMENT '爆料数', 

    `fb_cnt` bigint COMMENT '好价发布数', 

    `online_cnt` bigint COMMENT '活跃次数', 

    `checkin_cnt` bigint COMMENT '签到次数', 

    `fix_checkin` bigint COMMENT '补签次数', 

    `house_point` bigint COMMENT '幸运屋金币抽奖次数', 

    `house_gold` bigint COMMENT '幸运屋积分抽奖次数', 

    `pack_cnt` bigint COMMENT '礼品兑换次数', 

    `gold_add` bigint COMMENT '获取金币', 

    `gold_cancel` bigint COMMENT '支出金币', 

    `surplus_gold` bigint COMMENT '剩余金币', 

    `event` bigint COMMENT '电商点击次数', 

    `gmv_amount` bigint COMMENT 'gmv', 

    `gmv_sales` bigint COMMENT '订单数')

PARTITIONED BY (  `dt` string )
</code></pre>
<h3 id="_28">哪张表数据量最多</h3>
<p>  用户行为宽表：</p>
<p>  dws =》 22张</p>
<p>  100g =》 50g / 22 = 2.2g   2* 3倍 = 6g  =》 600万条</p>
<h2 id="ads_1">ADS层分析过哪些指标</h2>
<h3 id="_29">分析过的指标</h3>
<p>  日活、月活、周活、留存、留存率、新增（日、周、年）、转化率、流失、回流、七天内连续3天登录（点赞、收藏、评价、购买、加购、下单、活动）、连续3周（月）登录、GMV、复购率、复购率排行、点赞、评论、收藏、领优惠卷人数、使用优惠卷人数、沉默、值不值得买、退款人数、退款率  topn  热门商品</p>
<p>​    <font color="red">产品经理最关心的：留转G复活</font></p>
<p><center><strong>电商指标</strong></center></p>
<p>![trigger](<a class="glightbox" data-desc-position="bottom" data-description="" data-height="auto" data-title="" data-width="100%" href="https://s2.loli.net/2022/10/11/4NhBZqwgtur7QOW.png"><img alt="电商指标.png" src="https://s2.loli.net/2022/10/11/4NhBZqwgtur7QOW.png" width="800"/></a></p>
<h3 id="g">留转G复活指标</h3>
<p>（1）活跃</p>
<p>  日活：100万 ；周活是日活的1.1-1.3倍；月活：是日活的2-3倍  300万</p>
<p>  总注册的用户多少？1000万-3000万之间</p>
<p>  渠道来源：app  公众号   抖音  百度  36   头条  地推</p>
<p>（2）GMV</p>
<p>  GMV：每天 10万订单 （50 – 100元） 500万-1000万</p>
<p>  10%-20%  100万-200万（人员：程序员、人事、行政、财务、房租、收电费）</p>
<p>（3）复购率</p>
<p>  某日常商品复购；（手纸、面膜、牙膏）10%-20%</p>
<p>  电脑、显示器、手表  1%</p>
<p>（4）转化率</p>
<p>  商品详情  =》  加购物车  =》下单   =》  支付</p>
<p>  1%-5%            50-60%       80%-95% </p>
<p>（5）留存率</p>
<p>  1/2/3、周留存、月留存</p>
<p>  搞活动：  10-20%</p>
<h2 id="_30">分析过最难的指标</h2>
<ul>
<li>
<p>路径分析</p>
</li>
<li>
<p>用户留存率</p>
</li>
<li>
<p>最近7/30日各品牌复购率</p>
</li>
<li>
<p>7天内连续3天登录</p>
</li>
<li>
<p>每分钟同时在线人数</p>
</li>
</ul>
<script async="" crossorigin="anonymous" data-category="General" data-category-id="DIC_kwDOILD1rs4CR4oA" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="maomao199691/discuss" data-repo-id="R_kgDOILD1rg" data-strict="0" data-theme="light" src="https://giscus.app/client.js">
</script>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 数仓架构" class="md-footer__link md-footer__link--prev" href="../%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              数仓架构
            </div>
</div>
</a>
<a aria-label="Next: 生产经验—业务" class="md-footer__link md-footer__link--next" href="../%E7%94%9F%E4%BA%A7%E7%BB%8F%E9%AA%8C%E2%80%94%E4%B8%9A%E5%8A%A1/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              生产经验—业务
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2016 - 2020 Martin Donath
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://twitter.com/squidfunk" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.078830c0.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom"});})</script></body>
</html>